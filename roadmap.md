# Roadmap Content Guardian

## Введение

Цель - создать сервис автоматической модерации контента (Content Guardian), который будет способен обрабатывать текстовые данные, изображения, видео и аудио. Сервис должен быть масштабируемым, безопасным и экономичным.

## Стек технологий

- Go
- Node.js
- Kubernetes
- NATS JetStream/Kafka
- PostgreSQL
- S3-совместимое хранилище
- Redis
- Prometheus/Grafana
- OpenTelemetry

## Фазы разработки

### 1. Discovery (1-2 недели)

**Задача:** Исследование и планирование, формирование требований и прототипирование

### 2. MVP (текст) (4-6 недель)

**Задача:** Разработка базового функционала для модерации текстового контента

### 3. Изображения (4-6 недель)

**Задача:** Расширение функционала для работы с изображениями

### 4. Видео/Аудио (4-6 недель)

**Задача:** Расширение функционала для работы с видео и аудио контентом

### 5. Политики/Правила (2-3 недели)

**Задача:** Разработка и внедрение системы правил и политик модерации

### 6. Human-in-the-Loop (4 недели)

**Задача:** Создание возможности привлечения модераторов для решения неоднозначных ситуаций

### 7. Наблюдаемость/Безопасность (2-3 недели)

**Задача:** Внедрение инструментов мониторинга и усиление безопасности

### 8. Оптимизация стоимости (1-2 недели)

**Задача:** Оптимизация использования ресурсов и уменьшение затрат

## Риски и меры по их снижению

- Зависимость от внешних ML API → абстракция адаптеров, fallback-сценарии, кэширование
- Рост стоимости при спайках нагрузки → квоты, backpressure, возможность масштабирования до нуля (scale-to-zero)
- Ложные блокировки → human review, A/B тестирование правил, версионирование политик, обратная связь с пользователями
- Нарушение приватности/PII → минимизация хранимых данных, шифрование, политика хранения данных

## План первых шагов разработки

1) Создание структуры проекта и репозитория
2) Разработка минимальных сервисов: api-gateway (Go) и rules-engine (Node)
3) Создание Dockerfiles и docker-compose для локального запуска
4) Настройка базового CI (lint/build) на GitHub Actions

## Дальнейшие шаги

- Добавление NATS/Postgres в docker-compose (без использования в коде), подготовка подключения в api/env
- Создание OpenAPI-спеки для /v1/moderate/text и начало прокладки вызова rules-engine из api (HTTP клиент, таймауты, ретраи)
- Добавление линтеров (golangci-lint, eslint), pre-commit хуков и CODEOWNERS

---

Этот документ будет обновляться по мере продвижения проекта и возникновения новых задач и требований.
